/*
 * Bonvelo
 * Bonvelo - En marknadsplats f√∂r bra cyklar.
 * www.bonvelo.io
 * @author Mattias Haal
 * @version 0.1.0
 * Copyright 2015. Licensed licensed.
 */
function addEvent(t,e,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e[t]=n}function toggle(t){var e=document.querySelector(t);e.classList.toggle("active")}function Dropdown(t){if(this.btn=document.querySelector(".js-"+t+"-btn"),null!=this.btn){this.list=document.querySelector(".js-"+t+"-list"),this.items=document.querySelectorAll(".js-"+t+"-item"),this.data="data-"+t,this.placeholder=this.btn.children[0],this.inputData=this.btn.children[1],addEvent("click",this.list,function(t){return function(){t.btn.classList.contains("active")&&t.btn.classList.remove("active"),t.list.classList.contains("active")&&t.list.classList.remove("active")}}(this)),addEvent("click",this.btn,function(e){return function(){e.remove(".js-category-btn"),e.remove(".js-category-list"),e.remove(".js-brand-btn"),e.remove(".js-brand-list"),e.remove(".js-size-btn"),e.remove(".js-size-list"),e.remove(".js-region-btn"),e.remove(".js-region-list"),e.toggle(".js-"+t+"-btn"),e.toggle(".js-"+t+"-list")}}(this));for(var e=0;e<this.items.length;e++){var n=this.items[e];addEvent("click",n,function(t){return function(){var e=this.innerText,n=this.getAttribute(t.data);t.placeholder.innerText=e,t.inputData.value=n}}(this))}}Dropdown.prototype.toggle=function(t){var e=document.querySelector(t);e.classList.toggle("active")},Dropdown.prototype.remove=function(t){var e=document.querySelector(t);e.classList.remove("active")}}!function(){var t=document.querySelector(".js-spec");t&&addEvent("click",t,function(){toggle(".js-spec"),toggle(".post_spec")})}(),function(){var t=document.querySelector(".post_start-delete"),e=document.querySelector(".post_delete"),n=document.querySelector(".post_cancel");t&&addEvent("click",t,function(){toggle(".post_delete-bg")}),n&&addEvent("click",n,function(t){t.preventDefault(),toggle(".post_delete-bg")}),e&&addEvent("submit",e,function(){})}(),function(){new Dropdown("category")}(),function(){new Dropdown("brand")}(),function(){new Dropdown("size")}(),function(){new Dropdown("region")}(),function(){function t(){o.style.height="auto",o.style.height=o.scrollHeight+"px"}function e(){i.style.height="auto",i.style.height=i.scrollHeight+"px"}function n(){window.setTimeout(t,0),window.setTimeout(e,0)}var o=document.querySelector(".post_title");o&&(addEvent("change",o,t),addEvent("cut",o,n),addEvent("paste",o,n),addEvent("drop",o,n),addEvent("keydown",o,n),o.focus(),o.select());var i=document.querySelector(".post_text");i&&(addEvent("change",i,e),addEvent("cut",i,n),addEvent("paste",i,n),addEvent("drop",i,n),addEvent("keydown",i,n),i.focus(),i.select())}(),$(function(){$(".post_file--upload").on("change",function(){var t=this.files?this.files:[];if(t.length&&window.FileReader&&/^image/.test(t[0].type)){var e=new FileReader;e.readAsDataURL(t[0]),e.onloadend=function(){$(".post_file--preview").css("background-image","url("+this.result+")"),$(".post_file--preview").css("height","600px"),$(".post_file--preview").css("box-shadow","0 1px 2px 0 rgba(0,0,0,.05)"),$(function(){$(".item").matchHeight()})}}})});